var geolocs = [[-119.773,34.5582],[-119.785,34.5534],[-119.78,34.5582],[-119.785,34.5523],[-119.785,34.5523],[-119.786,34.5565],[-119.785,34.5564],[-119.783,34.5498],[-119.777,34.5586],[-119.785,34.5566],[-119.78,34.5582],[-119.787,34.5469],[-119.782,34.5589],[-119.777,34.559],[-119.786,34.5481],[-119.786,34.5566],[-119.782,34.559],[-119.78,34.5553],[-119.787,34.5495],[-119.785,34.5578],[-119.785,34.558],[-119.786,34.5507],[-119.785,34.5564],[-119.787,34.5496],[-119.772,34.5583],[-119.785,34.5558],[-119.773,34.5581],[-119.786,34.5508],[-119.786,34.5552],[-119.787,34.5498],[-119.778,34.5523],[-119.785,34.548],[-119.787,34.5537],[-119.778,34.5592],[-119.782,34.5591],[-119.786,34.5566],[-119.777,34.5589],[-119.786,34.5555],[-119.786,34.5478],[-119.779,34.5545],[-119.787,34.5488],[-119.779,34.5505],[-119.786,34.5502],[-119.786,34.5532],[-119.786,34.5594],[-119.786,34.5533],[-119.778,34.5515],[-119.779,34.5542],[-119.777,34.5586],[-119.786,34.5522],[-119.784,34.5483],[-119.781,34.559],[-119.782,34.5508],[-119.785,34.5561],[-119.787,34.5485],[-119.773,34.5581],[-119.786,34.5488],[-119.78,34.5587],[-119.775,34.5579],[-119.778,34.5525],[-119.782,34.5589],[-119.786,34.553],[-119.785,34.5565],[-119.779,34.5591],[-119.781,34.559],[-119.787,34.5468],[-119.786,34.5495],[-119.786,34.5552],[-119.783,34.5583],[-119.783,34.5585],[-119.773,34.5583],[-119.785,34.5524],[-119.785,34.5571],[-119.786,34.5495],[-119.78,34.5505],[-119.773,34.5582],[-119.773,34.5585],[-119.785,34.5564],[-119.785,34.548],[-119.787,34.549],[-119.784,34.5566],[-119.772,34.5587],[-119.785,34.5557],[-119.778,34.5522],[-119.783,34.5584],[-119.787,34.5498],[-119.772,34.5589],[-119.786,34.5481],[-119.786,34.5526],[-119.786,34.5485],[-119.783,34.559],[-119.779,34.5507],[-119.782,34.559],[-119.775,34.5578],[-119.785,34.5558],[-119.78,34.557],[-119.786,34.5484],[-119.783,34.5485],[-119.783,34.5483],[-119.775,34.5577],[-119.782,34.5588],[-119.78,34.5563],[-119.781,34.559],[-119.784,34.5583],[-119.787,34.5488],[-119.779,34.5592],[-119.779,34.553],[-119.782,34.559],[-119.786,34.5504],[-119.785,34.5524],[-119.786,34.549],[-119.787,34.5464],[-119.787,34.546],[-119.787,34.5496],[-119.786,34.5515],[-119.786,34.5508],[-119.783,34.5584],[-119.78,34.5581],[-119.772,34.5588],[-119.78,34.5588],[-119.785,34.5578],[-119.784,34.5581],[-119.785,34.5577],[-119.787,34.5499],[-119.787,34.5495],[-119.772,34.559],[-119.772,34.5589],[-119.787,34.5498],[-119.786,34.5489],[-119.787,34.5484],[-119.783,34.5584],[-119.786,34.5495],[-119.786,34.5506],[-119.779,34.5535],[-119.783,34.5588],[-119.773,34.5582],[-119.787,34.5497],[-119.787,34.5498],[-119.772,34.559],[-119.786,34.553],[-119.787,34.5466],[-119.787,34.5495],[-119.784,34.5483],[-119.786,34.5507],[-119.779,34.5535],[-119.786,34.5503],[-119.772,34.5588],[-119.782,34.5591],[-119.787,34.5545],[-119.786,34.553],[-119.787,34.5543],[-119.778,34.5589],[-119.78,34.5546],[-119.781,34.559],[-119.786,34.5565],[-119.777,34.5585],[-119.785,34.5578],[-119.773,34.5583],[-119.784,34.5482],[-119.783,34.5588],[-119.78,34.5544],[-119.777,34.5596],[-119.786,34.5503],[-119.783,34.5584],[-119.786,34.5489],[-119.787,34.5463],[-119.785,34.5565],[-119.786,34.5567],[-119.785,34.5575],[-119.778,34.5515],[-119.786,34.5594],[-119.773,34.5581],[-119.784,34.5579],[-119.786,34.5487],[-119.786,34.5528],[-119.785,34.5577],[-119.787,34.5495],[-119.786,34.5515],[-119.786,34.5488],[-119.784,34.5582],[-119.786,34.5503],[-119.786,34.5492],[-119.787,34.5464],[-119.785,34.5522],[-119.785,34.5564],[-119.786,34.5532],[-119.787,34.55],[-119.78,34.5573],[-119.788,34.5458],[-119.782,34.5506],[-119.772,34.5589],[-119.782,34.5591],[-119.786,34.5515],[-119.778,34.5522],[-119.786,34.5557],[-119.778,34.5514],[-119.785,34.5573],[-119.779,34.5507],[-119.772,34.559],[-119.779,34.5505],[-119.785,34.5564],[-119.783,34.5584],[-119.779,34.5534],[-119.773,34.5588],[-119.772,34.5586],[-119.787,34.5542],[-119.777,34.5589],[-119.787,34.5492],[-119.782,34.5503],[-119.785,34.557],[-119.787,34.5496],[-119.787,34.5462],[-119.785,34.5565],[-119.787,34.5492],[-119.778,34.5593],[-119.786,34.5503],[-119.786,34.5521],[-119.785,34.5476],[-119.785,34.5561],[-119.785,34.5566],[-119.785,34.556],[-119.775,34.5579],[-119.787,34.5463],[-119.786,34.5494],[-119.783,34.5584],[-119.786,34.5487],[-119.78,34.5573],[-119.782,34.5591],[-119.787,34.5481],[-119.787,34.5496],[-119.786,34.5528],[-119.785,34.5564],[-119.786,34.5503],[-119.779,34.5507],[-119.786,34.549],[-119.787,34.5498],[-119.787,34.5467],[-119.773,34.5585],[-119.779,34.5513],[-119.789,34.5453],[-119.78,34.5557],[-119.779,34.5505],[-119.777,34.5584],[-119.786,34.5556],[-119.78,34.5506],[-119.787,34.5546],[-119.764,34.565],[-119.78,34.5577],[-119.787,34.5478],[-119.785,34.5573],[-119.786,34.5508],[-119.779,34.551],[-119.784,34.552],[-119.786,34.5489],[-119.786,34.5512],[-119.786,34.549],[-119.786,34.5547],[-119.787,34.554],[-119.786,34.5506],[-119.782,34.5506],[-119.787,34.5469],[-119.787,34.5469],[-119.785,34.5573],[-119.785,34.5578],[-119.786,34.55],[-119.786,34.5583],[-119.78,34.5587],[-119.772,34.5591],[-119.786,34.555],[-119.78,34.558],[-119.779,34.5542],[-119.783,34.5589],[-119.786,34.551],[-119.783,34.5588],[-119.786,34.5488],[-119.787,34.5491],[-119.787,34.5469],[-119.785,34.5564],[-119.787,34.5464],[-119.786,34.5545],[-119.779,34.5508],[-119.785,34.5524],[-119.772,34.5592],[-119.787,34.5489],[-119.777,34.5589],[-119.779,34.5508],[-119.786,34.5546],[-119.786,34.5503],[-119.785,34.5572],[-119.786,34.5478],[-119.774,34.5572],[-119.778,34.5512],[-119.773,34.5582],[-119.781,34.559],[-119.786,34.5516],[-119.783,34.5585],[-119.784,34.5583],[-119.78,34.5576],[-119.777,34.5592],[-119.786,34.5565],[-119.782,34.5507],[-119.784,34.5579],[-119.779,34.5592],[-119.783,34.5489],[-119.785,34.5557],[-119.786,34.5537],[-119.784,34.5583],[-119.787,34.554],[-119.778,34.553],[-119.773,34.5584],[-119.787,34.5469],[-119.773,34.5587],[-119.786,34.5532],[-119.78,34.5576],[-119.782,34.5591],[-119.787,34.5469],[-119.785,34.5578],[-119.772,34.5592],[-119.78,34.5586],[-119.778,34.559],[-119.782,34.559],[-119.785,34.5574],[-119.786,34.5491],[-119.774,34.5575],[-119.785,34.5566],[-119.78,34.5552],[-119.786,34.5513],[-119.786,34.5516],[-119.786,34.5494],[-119.783,34.5589],[-119.787,34.5495],[-119.783,34.5498],[-119.777,34.5591],[-119.783,34.5584],[-119.777,34.5592],[-119.787,34.5494],[-119.787,34.5498],[-119.773,34.5587],[-119.782,34.5588],[-119.782,34.5505],[-119.778,34.559],[-119.786,34.5546],[-119.78,34.5506],[-119.781,34.5507],[-119.783,34.5584],[-119.786,34.5517],[-119.781,34.5506],[-119.785,34.5577],[-119.785,34.5565],[-119.785,34.5479],[-119.786,34.55],[-119.778,34.5592],[-119.787,34.5461],[-119.785,34.5478],[-119.787,34.548],[-119.787,34.5482],[-119.785,34.5567],[-119.786,34.5501],[-119.787,34.5494],[-119.785,34.5525],[-119.786,34.5509],[-119.787,34.5462],[-119.78,34.5575],[-119.787,34.5464],[-119.784,34.558],[-119.787,34.5498],[-119.787,34.5496],[-119.787,34.5484],[-119.781,34.5507],[-119.785,34.5577],[-119.772,34.5592],[-119.78,34.5582],[-119.785,34.5524],[-119.786,34.5526],[-119.786,34.5528],[-119.782,34.5591],[-119.786,34.5501],[-119.79,34.5448],[-119.786,34.5587],[-119.785,34.5561],[-119.787,34.5491],[-119.784,34.5579],[-119.773,34.5588],[-119.785,34.5578],[-119.786,34.5528],[-119.787,34.5493],[-119.786,34.5477],[-119.778,34.559],[-119.78,34.558],[-119.782,34.5591],[-119.786,34.5507],[-119.783,34.5485],[-119.787,34.5465],[-119.785,34.5566],[-119.783,34.5483],[-119.782,34.5589],[-119.78,34.5506],[-119.786,34.5526],[-119.786,34.5538],[-119.786,34.5556],[-119.786,34.5567],[-119.786,34.5477],[-119.785,34.5566],[-119.787,34.5494],[-119.777,34.5588],[-119.786,34.5542],[-119.785,34.5563],[-119.787,34.5543],[-119.786,34.5491],[-119.774,34.5577],[-119.779,34.5536],[-119.786,34.548],[-119.787,34.546],[-119.787,34.547],[-119.783,34.5482],[-119.782,34.559],[-119.786,34.5526],[-119.778,34.559],[-119.78,34.5582],[-119.786,34.5519],[-119.783,34.5584],[-119.787,34.5466],[-119.779,34.5534],[-119.785,34.5579],[-119.787,34.5496],[-119.786,34.5515],[-119.785,34.5564],[-119.78,34.5575],[-119.783,34.5486],[-119.785,34.5567],[-119.78,34.5583],[-119.786,34.5527],[-119.786,34.5481],[-119.786,34.5528],[-119.786,34.5526],[-119.787,34.5465],[-119.787,34.546],[-119.782,34.5503],[-119.783,34.5588],[-119.78,34.5582],[-119.786,34.5517],[-119.782,34.5589],[-119.773,34.5588],[-119.778,34.5526],[-119.785,34.5562],[-119.786,34.5503],[-119.784,34.5565],[-119.786,34.548],[-119.786,34.551],[-119.785,34.5567],[-119.772,34.5588],[-119.785,34.5566],[-119.787,34.5492],[-119.786,34.5526],[-119.773,34.5583],[-119.786,34.5592],[-119.786,34.5515],[-119.772,34.559],[-119.785,34.5577],[-119.786,34.5503],[-119.786,34.5494],[-119.786,34.5502],[-119.782,34.559],[-119.779,34.5543],[-119.779,34.5535],[-119.784,34.552],[-119.778,34.559],[-119.773,34.5582],[-119.786,34.5479],[-119.787,34.5461],[-119.785,34.5559],[-119.786,34.5549],[-119.786,34.549],[-119.773,34.5578],[-119.787,34.5468],[-119.773,34.5586],[-119.786,34.5502],[-119.787,34.5485],[-119.786,34.5532],[-119.786,34.5518],[-119.786,34.5494],[-119.786,34.5519],[-119.785,34.556]];
var species = [1781,2563,2564,2229,2231,2233,1835,2276,1621,1804,2005,1955,2025,2531,1909,1910,1698,2707,2584,1999,1707,1708,1854,2205,2208,1640,1716,1717,1668,2113,1760,1669,1643,2069,2413,1671,1672,1673,1674,1678,1679,1937,2162,2163,2117,1796,1892,1893,1895,1896,2438,2121,2266,1802,1803,2277,2052,1666,2515,1799,2165,2166,2168,2169,2171,2074,2332,2577,1913,1718,2458,2294,1963,1942,1944,2509,1700,1786,2335,2336,2590,1670,1902,1903,1904,2701,1648,2026,2029,1649,1967,2173,1608,2176,1725,1726,1968,1970,2083,2087,2088,1772,2141,2142,2323,2324,1972,2177,2516,1890,1857,1858,1859,1863,2012,1731,2302,1667,2280,1811,2125,2479,1735,2512,1915,1814,1865,2198,1793,1755,2040,1842,1745,1746,1701,1702,1845,2213,2219,2222,2224,2227,2228,2404,1779,1780,1817,2183,2191,2193,1866,2453,1713,2242,2245,1995,1838,1820,2077,2466,2022,1973,2486,2485,2396,2611,1689,2395,2037,2524,2526,1617,1917,1622,1977,1979,1980,1983,1984,1985,1987,1989,1656,1991,2446,1922,2317,2330,1612,2303,2285,1749,1839,2254,2257,2260,1822,2275,2185,2186,2307,1877,1880,1882,1883,1885,1843,1695,1696,1697,2447,1794,1795,2154,2061,2133,1684,1953,1742,1869,1826,1829,2547,2111,1703,2135,1693,1683,1888,2247,2250,2136,1833,1931,2203,2310,1840];

$(document).ready(function() {
	var vectorSource = new ol.source.Vector({
      //create empty vector
    });

	//create a bunch of icons and add to source vector
	geolocs.forEach(function(item,index) {
		var iconFeature = new ol.Feature({
		          geometry: new  
		            ol.geom.Point(ol.proj.fromLonLat(item)),
		        name: 'Flower',
		        coords: 'hi' 
		});
		vectorSource.addFeature(iconFeature);
	});

    //create the style
    var iconStyle = new ol.style.Style({
      image: new ol.style.Icon( ({
        anchor: [0.5, 46],
        anchorXUnits: 'fraction',
        anchorYUnits: 'pixels',
        opacity: 0.75,
        src: '../flower.png'
      }))
    });

    //add the feature vector to the layer vector, and apply a style to whole layer
    var vectorLayer = new ol.layer.Vector({
      source: vectorSource,
      style: iconStyle
    });

	var attribution = new ol.control.Attribution({
	     collapsible: false
	 });

	 var map = new ol.Map({
	     controls: ol.control.defaults({attribution: false}).extend([attribution]),
	     layers: [
	         new ol.layer.Tile({
	             source: new ol.source.OSM()
	         }),
	         vectorLayer
	     ],
	     target: 'map',
	     view: new ol.View({
	         center: ol.proj.fromLonLat([-119.644, 34.5158]),
	         zoom: 15,
	         maxZoom: 20
	     })
	 });

	// display popup on click
	map.on('click', function (evt) {
	  var feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {
	    return feature;
	  });
	  console.log($(element));
	  if (feature) {
	    var coordinates = feature.getGeometry().getCoordinates();
	    var lonlat = ol.proj.transform(coordinates, 'EPSG:3857', 'EPSG:4326');
	    console.log(lonlat);
	  }
	});

	var extent = vectorLayer.getSource().getExtent();
	map.getView().fit(extent, map.getSize());
});