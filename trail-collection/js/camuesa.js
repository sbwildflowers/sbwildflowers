var geolocs = [[-119.769,34.5517],[-119.746,34.5553],[-119.628,34.5335],[-119.729,34.5365],[-119.771,34.5589],[-119.775,34.5461],[-119.771,34.558],[-119.77,34.545],[-119.77,34.5514],[-119.771,34.5589],[-119.771,34.557],[-119.731,34.5444],[-119.768,34.5632],[-119.731,34.5443],[-119.636,34.5419],[-119.7,34.5595],[-119.756,34.5618],[-119.733,34.5501],[-119.628,34.534],[-119.767,34.5645],[-119.77,34.5564],[-119.771,34.5578],[-119.75,34.558],[-119.771,34.5573],[-119.629,34.5351],[-119.734,34.548],[-119.75,34.5631],[-119.716,34.5592],[-119.691,34.5469],[-119.746,34.5552],[-119.77,34.5609],[-119.769,34.5625],[-119.653,34.5404],[-119.664,34.5438],[-119.77,34.5609],[-119.771,34.5583],[-119.731,34.5432],[-119.701,34.5595],[-119.77,34.5609],[-119.631,34.5359],[-119.629,34.5346],[-119.75,34.5582],[-119.767,34.5598],[-119.731,34.5452],[-119.771,34.5601],[-119.666,34.5426],[-119.731,34.5452],[-119.771,34.5605],[-119.771,34.5452],[-119.68,34.5526],[-119.731,34.5453],[-119.766,34.5641],[-119.665,34.5431],[-119.765,34.5614],[-119.77,34.5611],[-119.77,34.5609],[-119.772,34.5458],[-119.75,34.5581],[-119.633,34.5365],[-119.701,34.5596],[-119.731,34.5427],[-119.766,34.5648],[-119.718,34.5648],[-119.769,34.5519],[-119.75,34.5582],[-119.769,34.55],[-119.75,34.5581],[-119.769,34.5626],[-119.683,34.5536],[-119.699,34.5504],[-119.765,34.5609],[-119.769,34.5506],[-119.767,34.5644],[-119.747,34.5561],[-119.769,34.5519],[-119.769,34.5515],[-119.769,34.5634],[-119.745,34.555],[-119.741,34.5531],[-119.718,34.5648],[-119.739,34.569],[-119.628,34.5321],[-119.769,34.5524],[-119.731,34.5429],[-119.771,34.5585],[-119.771,34.5594],[-119.746,34.5556],[-119.771,34.5592],[-119.769,34.5524],[-119.628,34.5319],[-119.749,34.5591],[-119.771,34.5583],[-119.77,34.5563],[-119.77,34.5556],[-119.771,34.5577],[-119.767,34.5644],[-119.767,34.5642],[-119.629,34.5348],[-119.769,34.5505],[-119.769,34.5627],[-119.769,34.5633],[-119.771,34.5573],[-119.769,34.5625],[-119.647,34.5434],[-119.768,34.5639],[-119.771,34.5578],[-119.771,34.5599],[-119.75,34.5573],[-119.769,34.5629],[-119.63,34.5354],[-119.731,34.545],[-119.734,34.5485],[-119.771,34.5594],[-119.628,34.5294],[-119.769,34.5523],[-119.767,34.5645],[-119.735,34.5365],[-119.767,34.5647],[-119.729,34.5392],[-119.768,34.5638],[-119.774,34.5464],[-119.769,34.5632],[-119.769,34.5515],[-119.77,34.551],[-119.77,34.5453],[-119.627,34.528],[-119.732,34.5369],[-119.77,34.5606],[-119.647,34.5437],[-119.768,34.5633],[-119.77,34.545],[-119.771,34.5592],[-119.769,34.5516],[-119.663,34.544],[-119.688,34.5531],[-119.77,34.5605],[-119.769,34.5514],[-119.628,34.5325],[-119.734,34.5502],[-119.77,34.5472],[-119.628,34.5322],[-119.768,34.5639],[-119.636,34.5414],[-119.712,34.566],[-119.77,34.5556],[-119.77,34.5514],[-119.734,34.57],[-119.731,34.5363],[-119.738,34.5528],[-119.769,34.5514],[-119.75,34.5582],[-119.767,34.5644],[-119.771,34.5452],[-119.751,34.5581],[-119.77,34.5554],[-119.63,34.5356],[-119.737,34.5507],[-119.767,34.5644],[-119.769,34.5515],[-119.768,34.5641],[-119.769,34.5516],[-119.687,34.5532],[-119.736,34.55],[-119.735,34.5501],[-119.641,34.5411],[-119.667,34.5421],[-119.712,34.5588],[-119.771,34.5573],[-119.768,34.5642],[-119.695,34.5489],[-119.734,34.5486],[-119.746,34.5615],[-119.769,34.5634],[-119.732,34.537],[-119.769,34.5518],[-119.767,34.5646],[-119.715,34.5649],[-119.736,34.5504],[-119.745,34.5626],[-119.735,34.55],[-119.771,34.5588],[-119.757,34.561],[-119.69,34.5534],[-119.729,34.5704],[-119.733,34.5469],[-119.767,34.5646],[-119.701,34.5598],[-119.733,34.5494],[-119.769,34.5502],[-119.77,34.5609],[-119.769,34.5625],[-119.748,34.5567],[-119.77,34.5609],[-119.763,34.5648],[-119.771,34.5606],[-119.75,34.5573],[-119.767,34.5644],[-119.769,34.5616],[-119.628,34.5293],[-119.732,34.5367],[-119.769,34.5501],[-119.656,34.5411],[-119.667,34.5413],[-119.728,34.5714],[-119.699,34.5504],[-119.692,34.5473],[-119.628,34.5322],[-119.77,34.5552],[-119.728,34.5374],[-119.748,34.5636],[-119.628,34.5316],[-119.651,34.5409],[-119.667,34.5423],[-119.699,34.5504],[-119.77,34.5452],[-119.771,34.5586],[-119.77,34.5451],[-119.628,34.5324],[-119.63,34.5353],[-119.734,34.537],[-119.669,34.5422],[-119.699,34.5504],[-119.77,34.5451],[-119.771,34.5577],[-119.733,34.5374],[-119.667,34.5424],[-119.77,34.5557],[-119.628,34.5335],[-119.77,34.5452],[-119.694,34.5554],[-119.75,34.5581],[-119.77,34.5516],[-119.773,34.5464],[-119.771,34.5576],[-119.77,34.5621],[-119.682,34.5533],[-119.647,34.5435],[-119.688,34.5532],[-119.77,34.5555],[-119.739,34.5527],[-119.767,34.5634],[-119.77,34.5455],[-119.771,34.5579],[-119.746,34.5553],[-119.77,34.5449],[-119.769,34.5634],[-119.746,34.5554],[-119.769,34.5502],[-119.768,34.5639],[-119.767,34.5645],[-119.771,34.5572],[-119.77,34.546],[-119.65,34.5419],[-119.666,34.5426],[-119.768,34.5639],[-119.629,34.5348],[-119.77,34.5511],[-119.636,34.5401],[-119.699,34.5504],[-119.769,34.5493],[-119.654,34.5409],[-119.718,34.5648],[-119.728,34.5366],[-119.758,34.561],[-119.769,34.5527],[-119.749,34.5573],[-119.74,34.5686],[-119.729,34.5372],[-119.751,34.563],[-119.769,34.5516],[-119.703,34.562],[-119.699,34.5504],[-119.732,34.5363],[-119.771,34.5593],[-119.655,34.541],[-119.661,34.5436],[-119.77,34.5452],[-119.771,34.5585],[-119.768,34.564],[-119.733,34.5456],[-119.772,34.5456],[-119.765,34.5607],[-119.681,34.5531],[-119.651,34.5408],[-119.769,34.5633],[-119.732,34.5368],[-119.771,34.5596],[-119.769,34.5502],[-119.771,34.5593],[-119.749,34.559],[-119.77,34.5461],[-119.77,34.5609],[-119.77,34.5465],[-119.77,34.5452],[-119.769,34.5501],[-119.734,34.537],[-119.674,34.5471],[-119.629,34.5348],[-119.77,34.5606],[-119.77,34.5607],[-119.766,34.5647],[-119.77,34.5618],[-119.628,34.5293],[-119.769,34.5506],[-119.771,34.5581],[-119.769,34.5491],[-119.629,34.5352],[-119.75,34.5578],[-119.629,34.5353],[-119.769,34.5509],[-119.732,34.5694],[-119.769,34.5516],[-119.769,34.5632],[-119.77,34.5513],[-119.77,34.5509],[-119.771,34.5452],[-119.734,34.5499],[-119.628,34.5292],[-119.768,34.564],[-119.77,34.5606],[-119.633,34.5364],[-119.672,34.5462],[-119.734,34.57],[-119.751,34.5607],[-119.72,34.5634],[-119.768,34.5639],[-119.769,34.5518],[-119.77,34.5452],[-119.732,34.5457],[-119.715,34.5648],[-119.728,34.5374],[-119.77,34.5609],[-119.771,34.5502],[-119.723,34.5695],[-119.766,34.5648],[-119.77,34.546],[-119.766,34.5648],[-119.77,34.5452],[-119.769,34.5626],[-119.769,34.5474],[-119.77,34.5449],[-119.746,34.5557],[-119.768,34.5632],[-119.629,34.5353],[-119.766,34.5648],[-119.77,34.5621],[-119.769,34.5503],[-119.771,34.5604],[-119.769,34.5502],[-119.731,34.5363],[-119.775,34.5462],[-119.63,34.5354],[-119.628,34.5319],[-119.769,34.5616],[-119.729,34.5411],[-119.771,34.5584],[-119.769,34.552],[-119.704,34.5527],[-119.77,34.5625],[-119.628,34.5333],[-119.771,34.5606],[-119.769,34.5481],[-119.77,34.5453],[-119.733,34.5461],[-119.772,34.5456],[-119.769,34.5632],[-119.751,34.5581],[-119.77,34.5606],[-119.666,34.5426],[-119.746,34.5553],[-119.767,34.5597],[-119.771,34.5604],[-119.628,34.5318],[-119.635,34.5393],[-119.769,34.5522],[-119.628,34.5324],[-119.749,34.5575],[-119.732,34.5365],[-119.77,34.5605],[-119.647,34.5435],[-119.665,34.543],[-119.769,34.5474],[-119.748,34.5564],[-119.771,34.5578],[-119.771,34.5577],[-119.683,34.5536],[-119.77,34.5607],[-119.769,34.5633],[-119.628,34.5302],[-119.771,34.5576],[-119.769,34.5514],[-119.77,34.5449],[-119.769,34.5625],[-119.768,34.5641],[-119.77,34.546],[-119.731,34.5456],[-119.721,34.5647],[-119.729,34.569],[-119.771,34.557],[-119.681,34.5531],[-119.68,34.5528],[-119.731,34.5431],[-119.769,34.5514],[-119.737,34.551],[-119.705,34.5629],[-119.769,34.5624],[-119.774,34.5465],[-119.739,34.5528],[-119.769,34.563],[-119.735,34.5371],[-119.746,34.5555],[-119.656,34.5413],[-119.667,34.5424],[-119.759,34.561],[-119.769,34.552],[-119.73,34.5364],[-119.769,34.554],[-119.771,34.5604],[-119.729,34.5364],[-119.762,34.5621],[-119.68,34.5529],[-119.726,34.5718],[-119.628,34.5345],[-119.771,34.5569],[-119.729,34.5373],[-119.769,34.5507],[-119.77,34.5454],[-119.738,34.5526],[-119.77,34.5612],[-119.733,34.5462],[-119.771,34.5576],[-119.77,34.5451],[-119.656,34.5412],[-119.682,34.5534],[-119.683,34.5539],[-119.729,34.5378],[-119.764,34.5624],[-119.769,34.5524],[-119.77,34.5605],[-119.701,34.5595],[-119.627,34.5312],[-119.738,34.5683],[-119.746,34.5552],[-119.768,34.5637],[-119.775,34.5458],[-119.75,34.5581],[-119.688,34.5531],[-119.681,34.5531],[-119.77,34.5609],[-119.733,34.5373],[-119.77,34.5509],[-119.771,34.5584],[-119.628,34.5288],[-119.744,34.5546],[-119.77,34.551],[-119.771,34.5584],[-119.733,34.5372],[-119.771,34.55],[-119.769,34.5633],[-119.656,34.5411],[-119.701,34.5598],[-119.744,34.5546],[-119.77,34.5451],[-119.63,34.5353],[-119.766,34.5646],[-119.713,34.5659],[-119.738,34.5684],[-119.698,34.5573],[-119.77,34.5555],[-119.747,34.561],[-119.749,34.5591],[-119.769,34.5632],[-119.77,34.5457],[-119.771,34.5589],[-119.771,34.5574],[-119.77,34.5519],[-119.766,34.5649],[-119.77,34.5452],[-119.771,34.5599],[-119.734,34.5499],[-119.77,34.5612],[-119.681,34.5531],[-119.77,34.5607],[-119.77,34.5611],[-119.687,34.5532],[-119.656,34.541],[-119.699,34.5504],[-119.729,34.5397],[-119.628,34.5292],[-119.771,34.5583],[-119.628,34.5319],[-119.77,34.5519],[-119.77,34.5605],[-119.74,34.5531],[-119.744,34.5547],[-119.75,34.56],[-119.77,34.561],[-119.771,34.5585],[-119.771,34.5579],[-119.77,34.55],[-119.746,34.5555],[-119.729,34.5392],[-119.767,34.5645],[-119.734,34.5368],[-119.769,34.5516],[-119.77,34.5451],[-119.631,34.536],[-119.734,34.5366]];
var species = [1781,2566,2229,2231,2233,2234,1835,2510,2276,1621,1804,1955,1910,2584,1998,1999,1707,1708,1710,1853,1854,1615,1600,1602,2208,1715,1716,1717,1668,2588,2589,1759,1760,2069,2413,1671,1672,1673,1674,1678,2419,1937,2160,2162,2117,1796,1892,1895,2121,2265,2266,2498,1803,2277,1666,2513,2080,1799,1800,1573,2165,2166,2167,2168,2171,2074,2332,2333,1913,1898,1718,2294,1963,1942,2509,2194,1945,1786,2335,2336,2320,1670,1902,2026,1610,2029,2030,2321,1649,1967,2172,2173,2174,1685,1609,1724,1725,1726,1968,2083,2087,2088,1772,2141,2142,1906,2323,2324,1972,2177,2516,1727,2364,1890,1858,1859,1862,1863,1851,2664,2012,1730,1731,1810,1784,1667,2280,2553,2125,2479,1735,2353,1915,1814,1782,1865,2198,2542,1793,2013,2015,2040,1842,1702,1845,2213,2219,2221,2224,2226,2227,2228,2404,1779,2151,1817,2183,2191,2192,2193,1866,1713,2242,2244,2245,1995,2077,2021,2518,2396,2179,2395,2037,2524,2526,1617,1618,1917,1919,1622,1979,1980,1983,1985,1987,1988,1991,2181,1658,2446,1922,2317,2303,2285,1749,1750,2254,2257,2259,2260,1822,2185,2186,2034,2036,2240,2288,2290,1877,1880,1882,1883,1843,1696,2447,1607,1795,2154,2133,1684,1953,1742,1826,1829,2135,1683,1888,1889,1659,2398,1833,2403,1931,1925,2203,2310,1840];

$(document).ready(function() {
	var vectorSource = new ol.source.Vector({
      //create empty vector
    });

	//create a bunch of icons and add to source vector
	geolocs.forEach(function(item,index) {
		var iconFeature = new ol.Feature({
		          geometry: new  
		            ol.geom.Point(ol.proj.fromLonLat(item)),
		        name: 'Flower',
		        coords: 'hi' 
		});
		vectorSource.addFeature(iconFeature);
	});

    //create the style
    var iconStyle = new ol.style.Style({
      image: new ol.style.Icon( ({
        anchor: [0.5, 46],
        anchorXUnits: 'fraction',
        anchorYUnits: 'pixels',
        opacity: 0.75,
        src: '../flower.png'
      }))
    });

    //add the feature vector to the layer vector, and apply a style to whole layer
    var vectorLayer = new ol.layer.Vector({
      source: vectorSource,
      style: iconStyle
    });

	var attribution = new ol.control.Attribution({
	     collapsible: false
	 });

	 var map = new ol.Map({
	     controls: ol.control.defaults({attribution: false}).extend([attribution]),
	     layers: [
	         new ol.layer.Tile({
	             source: new ol.source.OSM()
	         }),
	         vectorLayer
	     ],
	     target: 'map',
	     view: new ol.View({
	         center: ol.proj.fromLonLat([-119.644, 34.5158]),
	         zoom: 15,
	         maxZoom: 20
	     })
	 });

	// display popup on click
	map.on('click', function (evt) {
	  var feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {
	    return feature;
	  });
	  console.log($(element));
	  if (feature) {
	    var coordinates = feature.getGeometry().getCoordinates();
	    var lonlat = ol.proj.transform(coordinates, 'EPSG:3857', 'EPSG:4326');
	    console.log(lonlat);
	  }
	});

	var extent = vectorLayer.getSource().getExtent();
	map.getView().fit(extent, map.getSize());
});